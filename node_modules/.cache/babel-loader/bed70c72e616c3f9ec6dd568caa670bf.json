{"ast":null,"code":"import _defineProperty from\"C:/Users/iHelp-09/Desktop/ihelpv7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/iHelp-09/Desktop/ihelpv7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/iHelp-09/Desktop/ihelpv7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Button,Col,Container,Form,Row}from\"react-bootstrap\";import Layout from\"../../../common/Layout\";import SEO from\"../../../common/SEO\";import axios from\"../../../axios\";import Separator from\"../../../components/separator/Separator\";import SectionTitle from\"../../../components/sectionTitle/SectionTitle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddHighlights=function AddHighlights(props){var _useState=useState({name:\"\",photo:\"\",content:\"\",highlightCat:\"\"}),_useState2=_slicedToArray(_useState,2),contact=_useState2[0],setContact=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var getCategory=function getCategory(){axios.get(\"/highlightCats?limit=10\").then(function(resutl){return setCategory(resutl.data.data);}).catch(function(err){console.log(err);});};useEffect(function(){getCategory();},[]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var handleAddFormChange=function handleAddFormChange(event){event.preventDefault();if(event.target.type===\"file\"){setFile(event.target.files[0]);setContact(_objectSpread(_objectSpread({},contact),{},{photo:event.target.files[0].name}));}else{var fieldName=event.target.getAttribute(\"name\");var fieldValue=event.target.value;setContact(_objectSpread(_objectSpread({},contact),{},_defineProperty({},fieldName,fieldValue)));}};var handleAddFormSumbit=function handleAddFormSumbit(e){e.preventDefault();var token=localStorage.getItem(\"token\");var headers={Authorization:\"Bearer \".concat(token)};axios.post(\"/highlights\",contact,{headers:headers}).then(function(result){var newHighlight=result.data.data;var xhr=new XMLHttpRequest();var data=new FormData();data.append(\"file\",file);xhr.open(\"PUT\",\"http://159.223.70.190/api/v1/highlights/\".concat(newHighlight._id,\"/upload-photo\"),{headers:headers});xhr.send(data);console.log(data);console.log(result);props.history.push(\"/adminHighlights\");}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(SEO,{title:\"Admin\"}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(Separator,{}),/*#__PURE__*/_jsx(\"div\",{className:\"rn-service-area rn-section-gap \",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsx(SectionTitle,{textAlign:\"text-center\",radiusRounded:\"\",title:\"Highlight \\u043D\\u044D\\u043C\\u044D\\u0445\"})})})})})]}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{style:{paddingBottom:\"150px\"},children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleAddFormSumbit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Highlight \\u041D\\u044D\\u0440\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"name\",placeholder:\"name\",type:\"text\",onChange:handleAddFormChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Highlight content\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"content\",placeholder:\"content\",type:\"text\",onChange:handleAddFormChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"exampleForm.ControlInput2\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Highlight \\u0417\\u0443\\u0440\\u0430\\u0433\"}),/*#__PURE__*/_jsx(Form.Control,{name:\"photo\",type:\"file\",onChange:handleAddFormChange})]}),/*#__PURE__*/_jsx(\"fieldset\",{children:/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{as:\"legend\",column:true,sm:2,children:\"Category \\u0441\\u043E\\u043D\\u0433\\u043E\\u043D\\u043E \\u0443\\u0443.\"}),/*#__PURE__*/_jsx(Col,{sm:10,children:category.map(function(e){return/*#__PURE__*/_jsx(Form.Check,{type:\"radio\",label:e.name,name:\"highlightCat\",id:e._id,value:e._id,onChange:handleAddFormChange});})})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"\\u041D\\u044D\\u043C\\u044D\\u0445\"})]})})})})]})]})});};export default AddHighlights;","map":{"version":3,"sources":["C:/Users/iHelp-09/Desktop/ihelpv7/src/Admin/Highlights/AddHighlights/AddHighlights.js"],"names":["React","useState","useEffect","Button","Col","Container","Form","Row","Layout","SEO","axios","Separator","SectionTitle","AddHighlights","props","name","photo","content","highlightCat","contact","setContact","category","setCategory","getCategory","get","then","resutl","data","catch","err","console","log","file","setFile","handleAddFormChange","event","preventDefault","target","type","files","fieldName","getAttribute","fieldValue","value","handleAddFormSumbit","e","token","localStorage","getItem","headers","Authorization","post","result","newHighlight","xhr","XMLHttpRequest","FormData","append","open","_id","send","history","push","paddingBottom","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button, Col, Container, Form, Row } from \"react-bootstrap\";\r\nimport Layout from \"../../../common/Layout\";\r\nimport SEO from \"../../../common/SEO\";\r\nimport axios from \"../../../axios\";\r\nimport Separator from \"../../../components/separator/Separator\";\r\nimport SectionTitle from \"../../../components/sectionTitle/SectionTitle\";\r\nconst AddHighlights = (props) => {\r\n  const [contact, setContact] = useState({\r\n    name: \"\",\r\n    photo: \"\",\r\n    content: \"\",\r\n    highlightCat: \"\",\r\n  });\r\n  const [category, setCategory] = useState([]);\r\n  const getCategory = () => {\r\n    axios\r\n      .get(\"/highlightCats?limit=10\")\r\n      .then((resutl) => setCategory(resutl.data.data))\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    getCategory();\r\n  }, []);\r\n  const [file, setFile] = useState();\r\n\r\n  const handleAddFormChange = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (event.target.type === \"file\") {\r\n      setFile(event.target.files[0]);\r\n      setContact({ ...contact, photo: event.target.files[0].name });\r\n    } else {\r\n      const fieldName = event.target.getAttribute(\"name\");\r\n      const fieldValue = event.target.value;\r\n      setContact({ ...contact, [fieldName]: fieldValue });\r\n    }\r\n  };\r\n\r\n  const handleAddFormSumbit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    const headers = {\r\n      Authorization: `Bearer ${token}`,\r\n    };\r\n\r\n    axios\r\n      .post(\"/highlights\", contact, { headers })\r\n      .then((result) => {\r\n        const newHighlight = result.data.data;\r\n        const xhr = new XMLHttpRequest();\r\n        const data = new FormData();\r\n        data.append(\"file\", file);\r\n        xhr.open(\r\n          \"PUT\",\r\n          `http://159.223.70.190/api/v1/highlights/${newHighlight._id}/upload-photo`,\r\n          { headers }\r\n        );\r\n        xhr.send(data);\r\n        console.log(data);\r\n        console.log(result);\r\n        props.history.push(\"/adminHighlights\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  return (\r\n    <div>\r\n      <>\r\n        <SEO title=\"Admin\" />\r\n        <Layout>\r\n          <div className=\"main-content\">\r\n            <Separator />\r\n\r\n            {/* Start Service Area  */}\r\n            <div className=\"rn-service-area rn-section-gap \">\r\n              <div className=\"container\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-lg-12\">\r\n                    <SectionTitle\r\n                      textAlign=\"text-center\"\r\n                      radiusRounded=\"\"\r\n                      title=\"Highlight нэмэх\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* End Service Area  */}\r\n          </div>\r\n          <Container>\r\n            <Row style={{ paddingBottom: \"150px\" }}>\r\n              <Col>\r\n                <Form onSubmit={handleAddFormSumbit}>\r\n                  <Form.Group\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlInput1\"\r\n                  >\r\n                    <Form.Label>Highlight Нэр</Form.Label>\r\n                    <Form.Control\r\n                      name=\"name\"\r\n                      placeholder=\"name\"\r\n                      type=\"text\"\r\n                      onChange={handleAddFormChange}\r\n                    />\r\n                  </Form.Group>\r\n                  <Form.Group\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlInput1\"\r\n                  >\r\n                    <Form.Label>Highlight content</Form.Label>\r\n                    <Form.Control\r\n                      name=\"content\"\r\n                      placeholder=\"content\"\r\n                      type=\"text\"\r\n                      onChange={handleAddFormChange}\r\n                    />\r\n                  </Form.Group>\r\n                  <Form.Group\r\n                    className=\"mb-3\"\r\n                    controlId=\"exampleForm.ControlInput2\"\r\n                  >\r\n                    <Form.Label>Highlight Зураг</Form.Label>\r\n                    <Form.Control\r\n                      name=\"photo\"\r\n                      type=\"file\"\r\n                      onChange={handleAddFormChange}\r\n                    />\r\n                  </Form.Group>\r\n                  <fieldset>\r\n                    <Form.Group as={Row} className=\"mb-3\">\r\n                      <Form.Label as=\"legend\" column sm={2}>\r\n                        Category сонгоно уу.\r\n                      </Form.Label>\r\n                      <Col sm={10}>\r\n                        {category.map((e) => {\r\n                          return (\r\n                            <Form.Check\r\n                              type=\"radio\"\r\n                              label={e.name}\r\n                              name=\"highlightCat\"\r\n                              id={e._id}\r\n                              value={e._id}\r\n                              onChange={handleAddFormChange}\r\n                            />\r\n                          );\r\n                        })}\r\n                      </Col>\r\n                    </Form.Group>\r\n                  </fieldset>\r\n                  <Button type=\"submit\">Нэмэх</Button>\r\n                </Form>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Layout>\r\n      </>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddHighlights;\r\n"]},"metadata":{},"sourceType":"module"}